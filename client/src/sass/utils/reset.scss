/* _reset.scss */
@layer reset {
  /* 1) Modèle de boîte cohérent + marge/padding à zéro */
  :where(*, *::before, *::after) {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  /* 2) Base HTML */
  :where(html) {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* 3) Motion & features récentes */
  @media (prefers-reduced-motion: no-preference) {
    :where(html) {
      interpolate-size: allow-keywords;
    }
  }
  @media (prefers-reduced-motion: reduce) {
    :where(html:focus-within) {
      scroll-behavior: auto;
    }
    :where(*, *::before, *::after) {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* 4) Corps de page lisible */
  :where(body) {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  /* 5) Médias fluides */
  :where(img, picture, video, canvas, svg) {
    display: block;
    max-width: 100%;
    height: auto;
  }

  /* 6) Typo de base */
  :where(p, h1, h2, h3, h4, h5, h6) {
    overflow-wrap: break-word;
  }
  :where(p) {
    text-wrap: pretty;
  }
  :where(h1, h2, h3, h4, h5, h6) {
    text-wrap: balance;
  }

  /* 7) Contexte d’empilement racine (SPA/Next) */
  :where(#root, #__next) {
    isolation: isolate;
  }

  /* 8) Listes, citations, tableaux (hérités de ton reset classique) */
  :where(ol, ul) {
    list-style: none;
  }
  :where(blockquote, q) {
    quotes: none;
  }
  :where(blockquote::before, blockquote::after, q::before, q::after) {
    content: none;
  }
  :where(table) {
    border-collapse: collapse;
    border-spacing: 0;
  }

  /* 9) Liens et éléments divers */
  :where(a) {
    text-decoration-skip-ink: auto;
    color: inherit;
  }
  :where(hr) {
    height: 0;
    color: inherit;
    border: 0;
    border-top: 1px solid currentColor;
  }
  :where([hidden]) {
    display: none !important;
  }

  /* 10) Héritage typo pour contrôles */
  :where(input, button, textarea, select) {
    font: inherit;
    color: inherit;
  }

  /* 11) Boutons natifs et équivalents custom */
  :where(button, [role="button"]) {
    all: unset; /* neutralise les styles UA */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    appearance: none;
  }

  /* 12) Champs texte & assimilés (neutralisation douce et cohérente) */
  :where(
      input[type="text"],
      input[type="email"],
      input[type="password"],
      input[type="search"],
      input[type="url"],
      input[type="tel"],
      input[type="number"],
      input[type="date"],
      input[type="time"],
      input[type="datetime-local"],
      input[type="month"],
      input[type="week"],
      textarea,
      select
    ) {
    all: unset; /* “la commande” pour repartir propre */
    box-sizing: border-box;
    display: inline-block;
    min-width: 0;
    width: 100%;
    appearance: none;
    -webkit-appearance: none;
    background: transparent;
  }

  /* 13) Radios & checkboxes — base neutre pour styles custom */
  :where(input[type="checkbox"], input[type="radio"]) {
    all: unset;
    box-sizing: border-box;
    display: inline-grid;
    place-content: center;
    width: 1rem;
    height: 1rem;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
  }
  :where(input[type="radio"]) {
    border-radius: 999px;
  }

  /* 14) Accessibilité focus uniforme */
  :where(button, [role="button"], input, textarea, select):focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }

  /* 15) Fignolage UA spécifiques */
  :where(input[type="search"])::-webkit-search-cancel-button {
    -webkit-appearance: none;
  }
  :where(input[type="number"]) {
    -moz-appearance: textfield;
  }
  :where(input[type="number"])::-webkit-outer-spin-button,
  :where(input[type="number"])::-webkit-inner-spin-button {
    -webkit-appearance: none;
  }

  /* 16) Fichier: bouton interne neutre */
  :where(input[type="file"]) {
    all: unset;
    font: inherit;
    color: inherit;
  }
  :where(input[type="file"])::file-selector-button {
    all: unset;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
}
